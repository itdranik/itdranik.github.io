---
_edit_last: "2"
_last_editor_used_jetpack: block-editor
_thumbnail_id: "1731"
_wp_old_date: "2020-03-07"
_wpas_done_all: "1"
author: yauheni.shybeka
topics:
  - coding-interview-be
cover:
  alt: math-expressions-feature-image
  image: /wp-content/uploads/2020/02/math-expressions-feature-image-1.jpg
date: "2020-02-29T20:00:34+00:00"
guid: https://itdranik.com/?p=731
language:
  - English
parent_post_id: null
post_id: "731"
post_translations:
  - pll_5e4809c57cc17
tags:
  - c#
  - матэматычныя-выразы
  - парсер
title: Разбор матэматычных выразаў на C#. Такенізацыя
url: /be/math-expressions-tokenization-be/

---
Навука пастаянна развіваецца, тэхналогіі імкліва ўрываюцца ў наша жыццё, з'яўляюцца новыя інструменты і магчымасці, нязменна толькі адно \- пануры выраз твару твайго інтэрв'юера. І калі з чытаннем эмоцый інтэрв'юера мы разабраліся, то з чытаннем выразаў у нас усё яшчэ ёсць праблемы. Таму ў дадзеным пасце разбяром самую простую тэму ў кантэксце дадзенай задачы \- разбіццё зыходнага радка на асобныя токены.

Як згадвалася ў папярэдніх пастах пра [постфіксную натацыю](/be/math-expressions-postfix-notation-be/) і [алгарытм сартавальнай станцыі](/be/math-expressions-shunting-yard-algorithm-be/), мы маем наступныя віды токенаў:

1. Знакі арыфметычных аперацый `+, -, *, /`;
1. Круглыя дужкі `(, )`;
1. Рэчаісныя лікі. Для прастаты абмяжуемся толькі лікамі з дзесятковым раздзяляльнікамі і цэлымі лікамі;
1. У якасці раздзяляльнікаў токенаў можа выступаць толькі сімвал прабелу.

Створым цела асноўнага метаду на C#. Будзем чытаць выраз сімвал за сімвалам і адразу апрацоўваць. Для нашага выпадку гэтага дастаткова, у іншых выпадках лексічныя аналізатары могуць патрабаваць больш складаных падыходаў. Дадзеная тэма дастаткова добра разгледжана [ў той самай кнізе](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D1%8F%D1%82%D0%BE%D1%80%D1%8B:_%D0%BF%D1%80%D0%B8%D0%BD%D1%86%D0%B8%D0%BF%D1%8B,_%D1%82%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D0%B8_%D0%B8_%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B).

Спачатку рэалізуем самы просты варыянт: уваходны радок змяшчае толькі адзін лік, прабелы і аператары адсутнічаюць.

- Пакуль ёсць сімвалы, дадаем сімвалы ў асобнае сховішча, на аснове якіх будзем фарміраваць выніковы лік;
- Калі ў сховішчы ёсць сімвалы, то канвертуем сімвалы ў лік і дадаем у спіс выніковых токенаў.

Ускладнім трохі задачу: дазволім выкарыстанне некалькіх лікаў, якія раздзяляюцца прабеламі. Тады разбіццё на токены можна прадставіць у наступным выглядзе:

- Пакуль ёсць сімвалы, аналізуем чарговы сімвал:

  - Калі сімвал з'яўляецца раздзяляльнікам (прабелам), то канвертуем захаваныя ў сховішчы сімвалы ў лік і дадаем у спіс выніковых токенаў;

  - Інакш выкарыстоўваем сімвал для фарміравання ліку ў асобным сховішчы;
- Калі ў сховішчы засталіся сімвалы, то канвертуем сімвалы ў лік і дадаем у спіс выніковых токенаў.

Дададзім цяпер падтрымку апрацоўкі аператараў. Бо ў нашай пастаноўцы задачы ўсе аператары выражаюцца роўна адным сімвалам, то пры сустрэчы сімвала аператара будзем адразу захоўваць аператар у выніковую паслядоўнасць. Пры гэтым калі ў сховішчы ўтрымліваюцца сімвалы для фарміравання ліку, то канвертуем іх у лік. Тады фінальны алгарытм будзе выглядаць наступным чынам:

- Пакуль ёсць сімвалы, аналізуем чарговы сімвал:
  - Калі сімвал з'яўляецца раздзяляльнікам (прабелам), то канвертуем захаваныя ў сховішчы сімвалы ў лік і дадаем у спіс выніковых токенаў;
  - Калі сімвал з'яўляецца аператарам, то канвертуем захаваныя ў сховішчы сімвалы ў лік і дадаем у спіс выніковых токенаў, пасля чаго дадаем токен аператара ў выніковы спіс;
  - Інакш захоўваем сімвал для фарміравання ліку ў асобным сховішчы;
- Калі ў сховішчы засталіся сімвалы, то канвертуем сімвалы ў лік і дадаем у спіс выніковых токенаў.

Як заўсёды поўную рэалізацыю можна паглядзець на [GitHub](https://github.com/itdranik/coding-interview/) праекта coding-interview-en, а гэтым пастом будзем завяршаць тэму разбору матэматычных выразаў. Спадзяюся, што ўсё было пазнавальна і цікава. Да сустрэчы!
